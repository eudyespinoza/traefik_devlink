http:
  middlewares:
    redirect-https:
      redirectScheme:
        scheme: https
        permanent: true
    default-sec-headers:
      headers:
        stsSeconds: 31536000
        stsIncludeSubdomains: true
        stsPreload: true
        frameDeny: true
        contentTypeNosniff: true
        referrerPolicy: no-referrer
    gzip-compress:
      compress: {}
    cors-headers:
      headers:
        accessControlAllowOriginList:
          - "https://latitudarg.com"
          - "https://www.latitudarg.com"
          - "https://secureapprove.com"
          - "https://www.secureapprove.com"
          - "http://localhost:3000"
        accessControlAllowMethods:
          - "GET"
          - "POST"
          - "PUT"
          - "DELETE"
          - "OPTIONS"
        accessControlAllowHeaders:
          - "Content-Type"
          - "Authorization"
          - "X-Requested-With"
          - "Accept"
          - "Origin"
          - "Idempotency-Key"
          - "X-API-TOKEN"
        accessControlAllowCredentials: true
        accessControlMaxAge: 86400

  routers:
    # Redirige todo HTTP a HTTPS en entrypoint web
    http-catchall:
      rule: "HostRegexp(`{any:.+}`)"
      entryPoints: [ "web" ]
      middlewares: [ "redirect-https" ]
      service: noop
    # (opcional) dashboard
    traefik-dashboard:
      entryPoints: [ "websecure" ]
      rule: Host(`proxy.tu-dominio.com`)
      service: api@internal
      middlewares: [ "default-sec-headers" ]
      tls: {}

  services:
    noop:
      loadBalancer:
        servers:
          - url: "http://127.0.0.1"

tls:
  options:
    default:
      minVersion: VersionTLS12

  # certificates:
    # Cert para latitudarg.com (y www) - rutas corregidas
    # - certFile: /certs/latitudarg/latitudarg.com.crt
    #   keyFile: /certs/latitudarg/latitudarg.com.key

    # Cert para secureapprove.com (y www) - rutas corregidas
    # - certFile: /certs/secureapprove/secureapprove.com.crt
    #   keyFile: /certs/secureapprove/secureapprove.com.key